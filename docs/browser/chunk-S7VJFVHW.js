import{a as D}from"./chunk-UHDWITZ3.js";import{a as W}from"./chunk-2DF5BDZD.js";import{f as N}from"./chunk-KZP422GK.js";import{A as q,C as B,D as A,i as E,j as V,t as I,u as j,v as F,w as U}from"./chunk-3EJWS4FH.js";import{$ as w,$a as o,Db as z,Fa as S,T as g,Y as _,Ya as O,Z as h,Za as b,_a as m,a as C,ab as r,b as x,bb as y,cb as L,fb as p,gb as d,ob as l,pb as v,qb as k,rb as u,sa as f,sb as P,tb as M,ua as a,vb as T}from"./chunk-GPEBZ3KR.js";var G=s=>({background:s,"border-radius":"50%"}),H=(s,i)=>i.id;function J(s,i){if(s&1){let e=L();o(0,"div",7)(1,"div",9),p("click",function(){let c=_(e).$implicit,n=d();return h(n.router.navigate(["/movieDetails",c.id]))}),o(2,"div",10),y(3,"img",11),r(),o(4,"div",12)(5,"div",13),l(6),r()(),o(7,"div",14)(8,"div")(9,"h3"),l(10),r(),o(11,"p"),l(12),r()(),o(13,"div")(14,"img",15),p("click",function(c){let n=_(e).$implicit;return d().toggleWishlist(n),h(c.stopPropagation())}),r()()()()()}if(s&2){let e=i.$implicit,t=d();a(3),m("src","https://image.tmdb.org/t/p/w500/"+e.poster_path,f),a(),m("ngStyle",T(6,G,"conic-gradient("+(t.getVotePercent(e)>=70?"#28a745":t.getVotePercent(e)>=0?"#ffc107":"#dc3545")+" "+t.getVotePercent(e)+"%, #565555 "+t.getVotePercent(e)+"%)")),a(2),k(" ",t.getVotePercent(e),"% "),a(4),v(e.title),a(2),v(e.release_date),a(2),m("src",t.wishlistStore.isInWishlist(e.id)?"./heart-filled.png":"./heart-empty.png",f)}}var R=class s{moviesListStore=g(D);wishlistStore=g(I);langStore=g(W);document=g(w);router=g(N);searchTerm="";page=1;languages=["en","ar","fr","zh"];constructor(){z(()=>{let e=this.langStore.getLanguage()==="ar"?"rtl":"ltr";this.document.documentElement.dir=e,this.moviesListStore.loadNowPlaying(this.page)})}ngOnInit(){this.page=this.moviesListStore.currentPage(),this.moviesListStore.loadNowPlaying(this.page)}onLanguageChange(i){this.langStore.setLanguage(i)}onPageChange(i){this.page=i,this.moviesListStore.loadNowPlaying(i)}search(){this.searchTerm.trim()&&this.router.navigate(["/search"],{queryParams:{q:this.searchTerm.trim()}})}getVotePercent(i){return Math.round((i.vote_average||0)*10)}toggleWishlist(i){this.wishlistStore.isInWishlist(i.id)?this.wishlistStore.remove(i.id):this.wishlistStore.add(x(C({},i),{media_type:"movie"}))}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=S({type:s,selectors:[["app-movies-list-page"]],decls:15,vars:5,consts:[[1,"movies-list"],[1,"container"],[1,"search","rounded-1","mb-4"],[1,"search-form","d-flex","justify-content-between","align-items-center"],["type","text","placeholder","search and explore..",3,"ngModelChange","ngModel"],[3,"click"],[1,"row"],[1,"col-lg-2","col-md-4","col-sm-12","mb-3"],["aria-label","Default pagination",1,"d-flex","justify-content-center","mt-4",3,"pageChange","page","pageSize","collectionSize","maxSize"],[1,"movies-list__card","mb-3",3,"click"],[1,"card-img"],[1,"w-100","rounded-2",3,"src"],[1,"rate","d-flex","justify-content-center","align-items-center",3,"ngStyle"],[1,"circle"],[1,"d-flex","justify-content-between","align-items-center"],["alt","wishlist icon",1,"",3,"click","src"]],template:function(e,t){e&1&&(o(0,"section",0)(1,"div",1)(2,"div",2)(3,"h3"),l(4,"Welcome to our movie app"),r(),o(5,"p"),l(6,"Millions of movies, TV shows and people to discover. Explore now."),r(),o(7,"div",3)(8,"input",4),M("ngModelChange",function(n){return P(t.searchTerm,n)||(t.searchTerm=n),n}),r(),o(9,"button",5),p("click",function(){return t.search()}),l(10,"search"),r()()(),o(11,"div",6),O(12,J,15,8,"div",7,H),r(),o(14,"ngb-pagination",8),M("pageChange",function(n){return P(t.page,n)||(t.page=n),n}),p("pageChange",function(n){return t.onPageChange(n)}),r()()()),e&2&&(a(8),u("ngModel",t.searchTerm),a(4),b(t.moviesListStore.movies()),a(2),u("page",t.page),m("pageSize",1)("collectionSize",t.moviesListStore.totalPages())("maxSize",5))},dependencies:[q,j,F,U,A,B,V,E],styles:[".movies-list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{background-color:#f3f1f1;padding:35px}.movies-list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:32px;font-weight:600;margin-bottom:25px}.movies-list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.movies-list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 120px);padding:10px;border:none;border-radius:10px}.movies-list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:fit-content;padding:10px 20px;background-color:#ffe353;border:none;border-radius:10px}.movies-list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.movies-list[_ngcontent-%COMP%]   .movies-list__card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:15px;font-weight:700;margin:10px 0 5px;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.movies-list[_ngcontent-%COMP%]   .movies-list__card[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background-color:#2d2c2c;color:#fff;margin-top:-25px;margin-left:10px;position:relative;z-index:2}.movies-list[_ngcontent-%COMP%]   .movies-list__card[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;background-color:#292929;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:14px;color:#fff}.movies-list[_ngcontent-%COMP%]   .movies-list__card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#7f7f7f;margin:0}.movies-list[_ngcontent-%COMP%]   .movies-list__card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;cursor:pointer}"]})};export{R as MoviesListPage};
