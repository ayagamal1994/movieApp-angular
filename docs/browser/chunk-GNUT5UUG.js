import{a as W}from"./chunk-UHDWITZ3.js";import"./chunk-2DF5BDZD.js";import{d as I,f as N}from"./chunk-KZP422GK.js";import{A,C as U,D as $,i as E,j as V,t as j,u as F,v as D,w as L}from"./chunk-3EJWS4FH.js";import{$a as r,Fa as O,T as g,Ua as u,Va as f,Y as x,Ya as b,Z as S,Za as w,_a as m,a as P,ab as a,b as M,bb as y,cb as T,fa as h,fb as p,gb as l,ob as c,pb as C,qb as v,rb as k,sa as _,sb as R,tb as z,ua as o,vb as q}from"./chunk-GPEBZ3KR.js";var G=i=>({background:i,"border-radius":"50%"}),H=(i,t)=>t.id;function J(i,t){if(i&1){let e=T();r(0,"div",7)(1,"div",8)(2,"div",9),y(3,"img",10),a(),r(4,"div",11)(5,"div",12),c(6),a()(),r(7,"div",13)(8,"div")(9,"h3",14),c(10),a(),r(11,"p",15),c(12),a()(),r(13,"div")(14,"img",16),p("click",function(){x(e);let d=l().$implicit,s=l(2);return S(s.toggleWishlist(d))}),a()()()()()}if(i&2){let e=l().$implicit,n=l(2);o(3),m("src","https://image.tmdb.org/t/p/w500/"+e.poster_path,_),o(),m("ngStyle",q(6,G,"conic-gradient("+(n.getVotePercent(e)>=70?"#28a745":n.getVotePercent(e)>=0?"#ffc107":"#dc3545")+" "+n.getVotePercent(e)+"%, #565555 "+n.getVotePercent(e)+"%)")),o(2),v(" ",n.getVotePercent(e),"% "),o(4),C(e.title),o(2),C(e.release_date),o(2),m("src",n.wishlistStore.isInWishlist(e.id)?"./heart-filled.png":"./heart-empty.png",_)}}function K(i,t){if(i&1&&u(0,J,15,8,"div",7),i&2){let e=t.$implicit;f(e.poster_path?0:-1)}}function Q(i,t){if(i&1&&(r(0,"div",5),b(1,K,1,1,null,null,H),a()),i&2){let e=l();o(),w(e.store.movies())}}function X(i,t){i&1&&(r(0,"p"),c(1,"no movies found"),a())}var B=class i{route=g(I);store=g(W);wishlistStore=g(j);router=g(N);query=h("");page=h(1);searchTerm="";ngOnInit(){this.route.queryParams.subscribe(t=>{let e=(t.q||"").toLowerCase(),n=parseInt(t.page||"1");this.query.set(e),this.page.set(n),this.searchTerm=e,this.store.searchMovies(e,n)})}onSearchPageChange(t){let e=this.query();this.router.navigate(["/search"],{queryParams:{q:e,page:t}})}search(){let t=this.searchTerm.trim();t&&this.router.navigate(["/search"],{queryParams:{q:t}})}getVotePercent(t){return Math.round((t.vote_average||0)*10)}toggleWishlist(t){this.wishlistStore.isInWishlist(t.id)?this.wishlistStore.remove(t.id):this.wishlistStore.add(M(P({},t),{media_type:"movie"}))}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=O({type:i,selectors:[["app-movies-search-results-page"]],decls:11,vars:7,consts:[[1,"movies-search"],[1,"container"],[1,"search-form","d-flex","justify-content-between","align-items-center","mb-4"],["type","text","placeholder","search and explore..",3,"ngModelChange","ngModel"],[3,"click"],[1,"search-list","row"],["aria-label","Default pagination",1,"d-flex","justify-content-center","mt-4",3,"pageChange","collectionSize","page","pageSize","maxSize"],[1,"col-lg-2","col-md-4","col-sm-12","mb-3"],[1,"item","mb-3"],[1,"card-img"],[1,"w-100","rounded-2",3,"src"],[1,"rate","d-flex","justify-content-center","align-items-center",3,"ngStyle"],[1,"circle"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],[1,"fs-6","fw-bold","mb-1"],[1,"mb-0","text-muted"],["alt","wishlist icon",2,"width","24px","cursor","pointer",3,"click","src"]],template:function(e,n){e&1&&(r(0,"section",0)(1,"div",1)(2,"div",2)(3,"input",3),z("ngModelChange",function(s){return R(n.searchTerm,s)||(n.searchTerm=s),s}),a(),r(4,"button",4),p("click",function(){return n.search()}),c(5,"Search"),a()(),r(6,"h2"),c(7),a(),u(8,Q,3,0,"div",5)(9,X,2,0,"p"),r(10,"ngb-pagination",6),p("pageChange",function(s){return n.onSearchPageChange(s)}),a()()()),e&2&&(o(3),k("ngModel",n.searchTerm),o(4),v("Search results for: ",n.query()),o(),f(n.store.movies().length>0?8:9),o(2),m("collectionSize",n.store.totalPages())("page",n.page())("pageSize",1)("maxSize",5))},dependencies:[A,F,D,L,$,U,V,E],styles:[".movies-search[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 120px);padding:10px 20px;border-radius:10px;border:1px solid #c6c4c4}.movies-search[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:fit-content;padding:10px 20px;background-color:#ffe353;border:none;border-radius:10px}.movies-search[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.movies-search[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:20px 0 40px}.movies-search[_ngcontent-%COMP%]   .search-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{height:250px}.movies-search[_ngcontent-%COMP%]   .search-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.movies-search[_ngcontent-%COMP%]   .search-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:15px;font-weight:700;margin:10px 0 5px;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.movies-search[_ngcontent-%COMP%]   .search-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background-color:#2d2c2c;color:#fff;margin-top:-25px;margin-left:10px;position:relative;z-index:2}.movies-search[_ngcontent-%COMP%]   .search-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;background-color:#292929;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:14px;color:#fff}.movies-search[_ngcontent-%COMP%]   .search-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#7f7f7f;margin:0}.movies-search[_ngcontent-%COMP%]   .search-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px}"]})};export{B as MoviesSearchResultsPage};
