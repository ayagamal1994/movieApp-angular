import{a as N,b as $,d as W,h as j,l as h,m as F,n as D,o as A,p as K,w as Y,y as U,z as q}from"./chunk-J2ZEPP2I.js";import{$a as s,Db as E,Fa as x,T as l,Y as _,Ya as y,Z as w,Za as C,_a as g,a as P,ab as c,b,bb as M,cb as O,fb as p,gb as d,ob as m,pb as u,qb as k,rb as T,sa as f,sb as z,tb as I,ua as a,vb as V}from"./chunk-GPEBZ3KR.js";var B=F({providedIn:"root"},A({tvShows:[],currentPage:1,totalPages:1}),D(o=>{let i=l(W),e="2c2bef9d99b73c2a458dd29141f940d1";return{loadNowPlaying:(t=1)=>{let r=`https://api.themoviedb.org/3/tv/popular?api_key=${e}&page=${t}`;i.get(r).subscribe(n=>{h(o,{tvShows:n.results,currentPage:n.page,totalPages:n.total_pages})})},loadPopularMovies:()=>{let t=`https://api.themoviedb.org/3/tv/popular?api_key=${e}`;i.get(t).subscribe(r=>{h(o,{tvShows:r.results}),console.log("m",r.results)})},searchMovies:(t,r=1)=>{let S=` https://api.themoviedb.org/3/tv/popular?api_key=2c2bef9d99b73c2a458dd29141f940d1&query=${t}&page=${r}`;i.get(S).subscribe(v=>{h(o,{tvShows:v.results,currentPage:v.page,totalPages:v.total_pages})})}}}));var L=o=>({background:o,"border-radius":"50%"}),R=(o,i)=>i.id;function G(o,i){if(o&1){let e=O();s(0,"div",3)(1,"div",5),p("click",function(){let r=_(e).$implicit,n=d();return w(n.router.navigate(["/tvDetails",r.id]))}),s(2,"div",6),M(3,"img",7),c(),s(4,"div",8)(5,"div",9),m(6),c()(),s(7,"div",10)(8,"div")(9,"h3"),m(10),c(),s(11,"p"),m(12),c()(),s(13,"div")(14,"img",11),p("click",function(r){let n=_(e).$implicit;return d().toggleWishlist(n),w(r.stopPropagation())}),c()()()()()}if(o&2){let e=i.$implicit,t=d();a(3),g("src","https://image.tmdb.org/t/p/w500/"+e.poster_path,f),a(),g("ngStyle",V(6,L,"conic-gradient("+(t.getVotePercent(e)>=70?"#28a745":t.getVotePercent(e)>=0?"#ffc107":"#dc3545")+" "+t.getVotePercent(e)+"%, #565555 "+t.getVotePercent(e)+"%)")),a(2),k(" ",t.getVotePercent(e),"% "),a(4),u(e.name),a(2),u(e.first_air_date),a(2),g("src",t.wishlistStore.isInWishlist(e.id)?"./heart-filled.png":"./heart-empty.png",f)}}var H=class o{page=1;ngOnInit(){this.page=this.tvShowStore.currentPage(),this.tvShowStore.loadNowPlaying(this.page)}onPageChange(i){this.page=i,this.tvShowStore.loadNowPlaying(i)}router=l(j);tvShowStore=l(B);wishlistStore=l(K);constructor(){E(()=>{this.tvShowStore.loadPopularMovies()})}getVotePercent(i){return Math.round((i.vote_average||0)*10)}toggleWishlist(i){this.wishlistStore.isInWishlist(i.id)?this.wishlistStore.remove(i.id):this.wishlistStore.add(b(P({},i),{media_type:"tv"}))}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=x({type:o,selectors:[["app-movies-list-page"]],decls:6,vars:4,consts:[[1,"tvshows-list"],[1,"container"],[1,"row"],[1,"col-lg-2","col-md-4","col-sm-12","mb-3"],["aria-label","Default pagination",1,"d-flex","justify-content-center","mt-4",3,"pageChange","page","pageSize","collectionSize","maxSize"],[1,"tv-list__card","mb-3",3,"click"],[1,"card-img"],[1,"w-100","rounded-2",3,"src"],[1,"rate","d-flex","justify-content-center","align-items-center",3,"ngStyle"],[1,"circle"],[1,"d-flex","justify-content-between","align-items-center"],["alt","wishlist icon",1,"",3,"click","src"]],template:function(e,t){e&1&&(s(0,"section",0)(1,"div",1)(2,"div",2),y(3,G,15,8,"div",3,R),c(),s(5,"ngb-pagination",4),I("pageChange",function(n){return z(t.page,n)||(t.page=n),n}),p("pageChange",function(n){return t.onPageChange(n)}),c()()()),e&2&&(a(3),C(t.tvShowStore.tvShows()),a(2),T("page",t.page),g("pageSize",1)("collectionSize",t.tvShowStore.totalPages())("maxSize",5))},dependencies:[Y,q,U,$,N],styles:[".tvshows-list[_ngcontent-%COMP%]   .tv-list__card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:15px;font-weight:700;margin:10px 0 5px;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.tvshows-list[_ngcontent-%COMP%]   .tv-list__card[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background-color:#2d2c2c;color:#fff;margin-top:-25px;margin-left:10px;position:relative;z-index:2}.tvshows-list[_ngcontent-%COMP%]   .tv-list__card[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;background-color:#292929;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:14px;color:#fff}.tvshows-list[_ngcontent-%COMP%]   .tv-list__card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#7f7f7f;margin:0}.tvshows-list[_ngcontent-%COMP%]   .tv-list__card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;cursor:pointer}"]})};export{H as TvShowsPage};
